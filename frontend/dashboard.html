<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>마이페이지 | 꽃보라가든</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#2d5f3f"
                    }
                },
            },
        }
    </script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
<div class="flex min-h-screen">
<!-- 사이드바 -->
<aside class="w-72 bg-white border-r flex flex-col fixed h-full shadow-sm">
<div class="p-8">
<!-- 로고 -->
<div class="flex items-center gap-3 mb-10">
<div class="bg-primary/20 p-3 rounded-lg">
<span class="text-2xl">🌸</span>
</div>
<div>
<h1 class="text-lg font-bold text-primary"><a href="flower.html">꽃보라가든</a></h1>
<p class="text-gray-500 text-xs font-medium">마이페이지</p>
</div>
</div>

<!-- 네비게이션 -->
<nav class="flex flex-col gap-2">
<a class="flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 text-primary font-semibold" href="#">
<span class="text-xl">📊</span>
<span class="text-sm">대시보드</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-50 transition-colors" href="#">
<span class="text-xl">👤</span>
<span class="text-sm">내 정보</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-50 transition-colors" href="#">
<span class="text-xl">📍</span>
<span class="text-sm">배송지 관리</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-50 transition-colors" href="flower.html">
<span class="text-xl">🏪</span>
<span class="text-sm">쇼핑하기</span>
</a>
<button onclick="handleLogout()" class="flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-colors w-full text-left">
<span class="text-xl">🚪</span>
<span class="text-sm font-semibold">로그아웃</span>
</button>
</nav>
</div>

<!-- 적립금 카드 -->
<div class="mt-auto p-8">
<div class="bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl p-5 border border-primary/20">
<p class="text-xs font-bold text-primary mb-2">💰 내 적립금</p>
<div class="flex items-center gap-2 mb-3">
<span id="userPoints" class="text-3xl font-black text-primary">0원</span>
</div>
<p class="text-[10px] text-gray-600">구매 시 자동으로 적립됩니다</p>
<button class="mt-3 w-full py-2 bg-primary/10 text-primary text-xs font-bold rounded-lg hover:bg-primary/20 transition-colors">
적립 내역 보기
</button>
</div>
</div>
</aside>

<!-- 메인 컨텐츠 -->
<main class="flex-1 ml-72 p-12">
<div class="max-w-5xl mx-auto">
<!-- 헤더 -->
<div class="flex justify-between items-end mb-10">
<div>
<h1 class="text-4xl font-black mb-2">안녕하세요! <span id="userName">고객</span>님 👋</h1>
<p class="text-gray-500">주문 내역과 배송 현황을 확인하세요</p>
</div>
<button onclick="window.location.href='flower.html'" class="flex items-center gap-2 px-6 py-3 bg-primary text-white font-bold rounded-xl hover:shadow-lg transition-all hover:scale-105">
<span class="text-xl">➕</span>
<span>새 주문</span>
</button>
</div>

<!-- 콘텐츠 그리드 -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
<!-- 진행중인 주문 -->
<section class="bg-white rounded-2xl p-6 shadow-sm border">
<div class="flex items-center justify-between mb-6">
<h2 class="text-xl font-bold flex items-center gap-2">
<span>🚚</span>
<span>진행중인 주문</span>
</h2>
</div>
<div id="activeOrders" class="space-y-4">
<div class="flex gap-4">
<div class="w-24 h-24 bg-cover rounded-lg shadow-md" style='background-image: url("https://images.unsplash.com/photo-1563241527-3004b7be0ffd?w=200&q=80");'></div>
<div class="flex-1">
<div class="flex items-center gap-2 mb-2">
<span class="px-3 py-1 bg-primary/10 text-primary text-[11px] font-bold rounded-full">배송중</span>
<p class="text-gray-500 text-xs">#FL-8921</p>
</div>
<p class="text-lg font-bold mb-2">체리블라썸 꽃다발</p>
<div class="flex flex-col gap-2">
<div class="flex justify-between text-sm">
<span class="text-gray-500">배송 진행도</span>
<span class="font-bold text-primary">65%</span>
</div>
<div class="rounded-full h-2 bg-gray-100 overflow-hidden">
<div class="h-full rounded-full bg-primary transition-all" style="width: 65%;"></div>
</div>
<p class="text-xs text-gray-500">📦 예상 도착: 오늘 오후 2-4시</p>
</div>
<button class="mt-3 px-4 py-2 bg-gray-100 text-sm font-bold rounded-lg hover:bg-gray-200 transition-colors">
배송 추적하기
</button>
</div>
</div>
</div>
</section>

<!-- 최근 주문 -->
<section class="bg-white rounded-2xl p-6 shadow-sm border">
<h2 class="text-xl font-bold mb-6 flex items-center gap-2">
<span>📋</span>
<span>최근 주문</span>
</h2>
<div id="recentOrders" class="space-y-4">
<div class="flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg transition-colors">
<div class="flex gap-3">
<div class="w-16 h-16 bg-cover rounded-lg shadow-md" style='background-image: url("https://images.unsplash.com/photo-1487070183336-b863922373d4?w=200&q=80");'></div>
<div>
<p class="font-bold">핑크 드림 꽃다발</p>
<p class="text-xs text-gray-500">2026년 1월 10일</p>
<p class="text-xs text-primary font-semibold mt-1">89,000원</p>
</div>
</div>
<button class="px-4 py-2 text-primary border border-primary/20 hover:bg-primary/5 rounded-lg text-sm font-semibold transition-colors">
재주문
</button>
</div>
<div class="flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg transition-colors">
<div class="flex gap-3">
<div class="w-16 h-16 bg-cover rounded-lg shadow-md" style='background-image: url("https://images.unsplash.com/photo-1501226260458-b9a21e1c9fe0?w=200&q=80");'></div>
<div>
<p class="font-bold">로얄 레드 장미</p>
<p class="text-xs text-gray-500">2025년 12월 25일</p>
<p class="text-xs text-primary font-semibold mt-1">125,000원</p>
</div>
</div>
<button class="px-4 py-2 text-primary border border-primary/20 hover:bg-primary/5 rounded-lg text-sm font-semibold transition-colors">
재주문
</button>
</div>
</div>
</section>
</div>

<!-- 추가 정보 카드 -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
<div class="bg-white rounded-xl p-6 shadow-sm border">
<div class="flex items-center justify-between mb-3">
<h3 class="font-bold text-gray-700">총 주문</h3>
<span class="text-2xl">📦</span>
</div>
<p class="text-3xl font-black text-primary"><span data-stat="orders">0</span>건</p>
<p class="text-xs text-gray-500 mt-1">전체 기간</p>
</div>
<div class="bg-white rounded-xl p-6 shadow-sm border">
<div class="flex items-center justify-between mb-3">
<h3 class="font-bold text-gray-700">총 구매액</h3>
<span class="text-2xl">💳</span>
</div>
<p class="text-3xl font-black text-primary" data-stat="spent">0원</p>
<p class="text-xs text-gray-500 mt-1">전체 기간</p>
</div>
<div class="bg-white rounded-xl p-6 shadow-sm border">
<div class="flex items-center justify-between mb-3">
<h3 class="font-bold text-gray-700">정기구독</h3>
<span class="text-2xl">🔄</span>
</div>
<p class="text-3xl font-black text-primary"><span data-stat="subscriptions">0</span>개</p>
<p class="text-xs text-gray-500 mt-1">활성 구독</p>
</div>
</div>

<!-- 전체 주문 내역 -->
<div class="mt-8">
<h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
<span>📋</span>
<span>전체 주문 내역</span>
</h2>
<div id="orderList" class="space-y-4">
<p class="text-gray-500 text-center py-8">주문 내역을 불러오는 중...</p>
</div>
</div>
</div>
</main>
</div>

<script>
// Supabase와 자동 연동 (flower.js에서 처리)
console.log('마이페이지 로드 완료');
</script>

<!-- Supabase Client -->
<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'

// Supabase 초기화
const SUPABASE_URL = 'https://xebqrsnkimtdlrjylvgy.supabase.co';
const SUPABASE_ANON_KEY = 'sb_publishable_hAxbFj3PjkdVeYqDssDsDQ_aoND-4FU';
window.supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
console.log('✅ Supabase 연결 완료!');
</script>
<script src="flower.js"></script>
</body>
</html>
